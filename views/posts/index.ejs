<!doctype html>
<html lang="en">
    <head>
        <%- include('../head') %>
      </head>
      <body>
        <%- include('../nav') %>

        <div class="container-fluid pt-3">
            <h4><i class="fas fa-newspaper"></i> Listagem de Publicações</h4>
            <a class="btn btn-secondary" href="/posts/create"><i class="fas fa-plus"></i> Nova Publicação</a><br />

            <div class="table-responsive pt-3">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th scope="col">Título</th>
                        <th scope="col">Categoria</th>
                        <th scope="col">Ações</th>
                    </tr>
                    </thead>
                    <tbody>
                    <% postsOfCategories.forEach(category => { %>
                        <% category.post.forEach(post => { %>
                        <tr>
                            <th scope="row"><%= post.title %></th>
                            <td>
                                <%= post.category %>
                            </td>
                            <td>
                                <a class="text-dark" href="/posts/edit/<%= category.id %>/<%= post.id %>"><i class="fas fa-edit"></i> Editar</a> | 
                                <a class="text-dark" href="/posts/destroy/<%= category.id %>/<%= post.id %>"><i class="fas fa-trash"></i> Excluir</a><br />
                            </td>
                        </tr>
                        <% }) %>
                    <% }) %>
                    </tbody>
                </table>
            </div>
        </div>

        <%- include('../footer') %>
    </body>
</html>
